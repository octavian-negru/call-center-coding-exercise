<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1418" height="780"><desc>title%20Call%20Center%20Sequence%20Diagram%0A%0Aparticipant%20CallCenterOrchestrator%0Aparticipant%20Consumer%0Aparticipant%20PhoneCallRouter%0Aparticipant%20ActorsCreator%0Aparticipant%20InsuranceAgent%0A%0A%0ACallCenterOrchestrator-%3EActorsCreator%3AActorsCreator().consumers%0ACallCenterOrchestrator%3C-ActorsCreator%3AReturns%20all%20the%20consumers.%0ACallCenterOrchestrator-%3EConsumer%3ASpawn%20one%20thread%20per%20consumer%2C%20triggering%20consumer.call()%0AConsumer-%3EPhoneCallRouter%3APhoneCallRouter.call_agent()%0APhoneCallRouter-%3EActorsCreator%3AActorsCreator().agents%0APhoneCallRouter%3C-ActorsCreator%3AReturns%20all%20the%20agents.%0APhoneCallRouter-%3EPhoneCallRouter%3AFilter%20only%20agents%20which%20accepts_call_from(caller).%5CnRandomly%20select%20one%20agent.%0APhoneCallRouter-%3EInsuranceAgent%3AIf%20agent%20**available**%3A%20agent.respond()%2C%20the%20call%20is%20started%5Cnif%20**not%20available**%3A%20found_agent.put_voice_mail_msg(caller)%0A%0A%0Anote%20over%20Consumer%2CInsuranceAgent%3AEach%20InsuranceAgent%20has%20a%20thread%20which%20polls%20periodically%20the%20internal%20voice%20mail.%5CnIf%20**not%20in%20a%20call**%2C%20extract%20messages%20from%20voice%20mail%20messages%20and%3A%5Cn%5Cn-if%20consumer.accepts_call_from(self)%3A%20consumer.respond()%5Cn-else%3A%20insert%20the%20message%20back%20in%20the%20voice%20mail%5Cn</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1418" height="780"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="557.060402426284" y="26.3876361" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Call Center Sequence Diagram</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 103.24960418017189 103.26361593799999 L 103.24960418017189 780.5462758379999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 534.7443007526979 103.26361593799999 L 534.7443007526979 780.5462758379999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 773.188994273466 103.26361593799999 L 773.188994273466 780.5462758379999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1129.7405372997682 103.26361593799999 L 1129.7405372997682 780.5462758379999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1339.3712121164879 103.26361593799999 L 1339.3712121164879 780.5462758379999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray="13.532121076923076,5.863919133333333"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.795878700000003 55.765870957999994 L 197.70332966034377 55.765870957999994 L 197.70332966034377 103.26361593799999 L 8.795878700000003 103.26361593799999 L 8.795878700000003 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="27.88293547900001" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">CallCenterOrchestrator</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 481.8405783242838 55.765870957999994 L 587.648023181112 55.765870957999994 L 587.648023181112 103.26361593799999 L 481.8405783242838 103.26361593799999 L 481.8405783242838 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="500.9276351032838" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Consumer</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 698.2686054326985 55.765870957999994 L 848.1093831142337 55.765870957999994 L 848.1093831142337 103.26361593799999 L 698.2686054326985 103.26361593799999 L 698.2686054326985 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="717.3556622116985" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">PhoneCallRouter</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1065.4368133454752 55.765870957999994 L 1194.0442612540612 55.765870957999994 L 1194.0442612540612 103.26361593799999 L 1065.4368133454752 103.26361593799999 L 1065.4368133454752 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1084.5238701244753" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ActorsCreator</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1268.9508232757203 55.765870957999994 L 1409.7916009572555 55.765870957999994 L 1409.7916009572555 103.26361593799999 L 1268.9508232757203 103.26361593799999 L 1268.9508232757203 55.765870957999994 Z" stroke-miterlimit="10" stroke-width="2.814681184" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1288.0378800547203" y="85.67185853800001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">InsuranceAgent</text></g></g><g><g><g><rect fill="white" stroke="none" x="525.8729773570209" y="138.44713073799997" width="181.24418676589843" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="528.5117409670208" y="154.279712398" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ActorsCreator().consumers</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 103.24960418017189 161.31641535799997 L 1115.256657040435 161.31641535799997" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1129.7405372997682,161.31641535799997) translate(-1129.7405372997682,-161.31641535799997)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1115.0807394664348 153.9865164413333 L 1129.7405372997682 161.31641535799997 L 1115.0807394664348 168.64631427466665 Z"/></g></g><g><g><rect fill="white" stroke="none" x="526.6813040782123" y="187.70405145799995" width="179.62753332351562" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="529.3200676882122" y="203.53663311799997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Returns all the consumers.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1129.7405372997682 210.57333607799995 L 117.73348443950522 210.57333607799995" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(103.24960418017189,210.57333607799995) translate(-103.24960418017189,-210.57333607799995)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 117.90940201350521 203.24343716133328 L 103.24960418017189 210.57333607799995 L 117.90940201350521 217.90323499466663 Z"/></g></g><g><g><rect fill="white" stroke="none" x="124.0665171035052" y="236.96097217799993" width="389.8608707258594" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="126.7052807135052" y="252.79355383799995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Spawn one thread per consumer, triggering consumer.call()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 103.24960418017189 259.83025679799994 L 520.2604204933646 259.83025679799994" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(534.7443007526979,259.83025679799994) translate(-534.7443007526979,-259.83025679799994)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 520.0845029193646 252.50035788133326 L 534.7443007526979 259.83025679799994 L 520.0845029193646 267.1601557146666 Z"/></g></g><g><g><rect fill="white" stroke="none" x="555.5612136760312" y="286.21789289799995" width="196.81086767410156" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="558.1999772860312" y="302.05047455799996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">PhoneCallRouter.call_agent()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 534.7443007526979 309.0871775179999 L 758.7051140141327 309.0871775179999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(773.188994273466,309.0871775179999) translate(-773.188994273466,-309.0871775179999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 758.5291964401328 301.75727860133327 L 773.188994273466 309.0871775179999 L 758.5291964401328 316.41707643466657 Z"/></g></g><g><g><rect fill="white" stroke="none" x="874.692670877789" y="335.4748136179999" width="153.54418981765625" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="877.331434487789" y="351.30739527799994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ActorsCreator().agents</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 773.188994273466 358.3440982379999 L 1115.256657040435 358.3440982379999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1129.7405372997682,358.3440982379999) translate(-1129.7405372997682,-358.3440982379999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1115.0807394664348 351.01419932133325 L 1129.7405372997682 358.3440982379999 L 1115.0807394664348 365.67399715466655 Z"/></g></g><g><g><rect fill="white" stroke="none" x="875.501005228375" y="384.7317343379999" width="151.92752111648437" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="878.139768838375" y="400.5643159979999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Returns all the agents.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1129.7405372997682 407.6010189579999 L 787.6728745327994 407.6010189579999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(773.188994273466,407.6010189579999) translate(-773.188994273466,-407.6010189579999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 787.8487921067994 400.27112004133323 L 773.188994273466 407.6010189579999 L 787.8487921067994 414.93091787466653 Z"/></g></g><g><g><rect fill="white" stroke="none" x="794.0059071967994" y="433.9886550579999" width="329.5775150129688" height="22.86928462"/></g><g><rect fill="white" stroke="none" x="794.0059071967994" y="451.5804124579999" width="186.97752416824218" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="796.6446708067994" y="449.8212367179999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Filter only agents which accepts_call_from(caller).</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="796.6446708067994" y="467.4129941179999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Randomly select one agent.</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 773.188994273466 474.44969707799993 L 843.5560238734661 474.44969707799993 L 843.5560238734661 497.3189816979999 L 787.6728745327994 497.3189816979999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(773.188994273466,497.3189816979999) translate(-773.188994273466,-497.3189816979999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 787.8487921067994 489.98908278133325 L 773.188994273466 497.3189816979999 L 787.8487921067994 504.64888061466655 Z"/></g></g><g><g><rect fill="white" stroke="none" x="867.4663413015909" y="523.7066177979999" width="349.8441890547168" height="22.86928462"/></g><g><rect fill="white" stroke="none" x="867.4663413015909" y="541.2983751979999" width="377.6275237867725" height="22.86928462"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="870.1051049115908" y="539.5391994579999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If agent </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="923.0384392621768" y="539.5391994579999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">available</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="984.9551072004092" y="539.5391994579999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">: agent.respond(), the call is started</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="870.1051049115908" y="557.1309568579999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">if </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="881.5051045301211" y="557.1309568579999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">not available</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="970.3051075818789" y="557.1309568579999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">: found_agent.put_voice_mail_msg(caller)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 773.188994273466 564.167659818 L 1324.8873318571545 564.167659818" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g transform="translate(1339.3712121164879,564.167659818) translate(-1339.3712121164879,-564.167659818)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1324.7114142831545 556.8377609013332 L 1339.3712121164879 564.167659818 L 1324.7114142831545 571.4975587346667 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 518.9117190926979 590.555295918 L 1339.371212116488 590.555295918 L 1355.203793776488 606.3878775779999 L 1355.203793776488 718.9751249379999 L 518.9117190926979 718.9751249379999 L 518.9117190926979 590.555295918 M 1339.371212116488 590.555295918 L 1339.371212116488 606.3878775779999 L 1355.203793776488 606.3878775779999" stroke-miterlimit="10" stroke-width="1.4659797833333332" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="672.6410999404522" y="615.1837562779999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Each InsuranceAgent has a thread which polls periodically the internal voice mail.</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="672.6410999404522" y="632.7755136779999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">If </text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="bold" text-decoration="normal" x="684.8410997497174" y="632.7755136779999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">not in a call</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="765.4744310485455" y="632.7755136779999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">, extract messages from voice mail messages and:</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="672.6410999404522" y="650.3672710779999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"></text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="672.6410999404522" y="667.9590284779999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">-if consumer.accepts_call_from(self): consumer.respond()</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="672.6410999404522" y="685.5507858779999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">-else: insert the message back in the voice mail</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="672.6410999404522" y="703.142543278" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"></text></g></g><g/><g/><g/><g/><g/></g></svg>